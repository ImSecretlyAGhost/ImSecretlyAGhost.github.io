<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Czech Immigrants in Chicago</title>
  <link rel="icon" href="data:,">
  <meta name="color-scheme" content="dark">
  <style>
    :root {
      --bg: #000;
      --muted: #999;
      --accent: #7c5cff;
      --overlay-bg: rgba(0,0,0,0.85);
    }
    html,body {margin:0; height:100%; background:#000; color:#fff; font-family:monospace; overflow:hidden;}
    .centered {display:flex; align-items:center; justify-content:center; height:100vh; text-align:center;}

    /* ASCII loading screen */
    #loadingScreen {position:fixed; inset:0; background:#000; color:#0f0; display:flex; align-items:center; justify-content:center; flex-direction:column; z-index:999; transition:opacity 2s ease;}
    pre {font-size:12px; line-height:12px;}

    /* Main content */
    #mainContent {opacity:0; pointer-events:none; transition:opacity 1.5s ease;}
    #mainContent.show {opacity:1; pointer-events:auto; overflow:auto; height:100vh;}

    header {text-align:center; margin-top:40px;}
    header h1 {font-size:24px; margin-bottom:8px;}
    header p {color:var(--muted);}

    .image-grid {display:flex; justify-content:center; flex-wrap:wrap; gap:20px; margin-top:40px;}
    .image-grid img {width:200px; height:200px; object-fit:cover; border-radius:10px; cursor:pointer; transition:transform 0.2s;}
    .image-grid img:hover {transform:scale(1.05);}

    /* Popup overlay */
    #overlay {position:fixed; inset:0; background:var(--overlay-bg); display:none; align-items:center; justify-content:center; z-index:50;}
    #overlay.show {display:flex;}
    .popup {background:#111; padding:20px; border-radius:10px; max-width:700px; max-height:80vh; overflow:auto; border:1px solid #222;}
    .popup h2 {margin-top:0;}
    .closeBtn {background:none; border:none; color:var(--muted); font-size:20px; cursor:pointer; position:absolute; top:20px; right:30px;}
  </style>
</head>
<body>

  <div id="loadingScreen">
    <pre>

░▒▓██████▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓██████▓▒░  
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░        
░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░        
░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░        
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
 ░▒▓██████▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓██████▓▒░  
                                        
                                        

      Czech Immigrants in Chicago
    </pre>
  </div>

  <div id="mainContent">
    <header>
      <h1>Topic.</h1>
      <p>Click an image below to explore more information.</p>
    </header>

    <section class="image-grid">
      <img src="https://placekitten.com/300/300" data-title="Kitten One" data-file="page1.html" alt="Kitten 1">
      <img src="https://placekitten.com/301/301" data-title="Kitten Two" data-file="page2.html" alt="Kitten 2">
      <img src="https://placekitten.com/302/302" data-title="Kitten Three" data-file="page3.html" alt="Kitten 3">
    </section>
  </div>

  <div id="overlay">
    <div class="popup">
      <button class="closeBtn" id="closeBtn">✕</button>
      <h2 id="popupTitle">Title</h2>
      <div id="popupContent"><p>Loading...</p></div>
    </div>
  </div>

  <script>
    const loading = document.getElementById('loadingScreen');
    const main = document.getElementById('mainContent');

    // Simulate loading delay and fade out
    setTimeout(() => {
      loading.style.opacity = '0';
      setTimeout(() => {
        loading.style.display = 'none';
        main.classList.add('show');
      }, 2000);
    }, 10000);

    // Overlay logic
    const overlay = document.getElementById('overlay');
    const popupTitle = document.getElementById('popupTitle');
    const popupContent = document.getElementById('popupContent');
    const closeBtn = document.getElementById('closeBtn');

    document.querySelectorAll('.image-grid img').forEach(img => {
      img.addEventListener('click', async () => {
        overlay.classList.add('show');
        popupTitle.textContent = img.dataset.title;
        popupContent.innerHTML = '<p>Loading...</p>';
        try {
          const res = await fetch('/pages/' + img.dataset.file);
          if(!res.ok) throw new Error('Not found');
          const text = await res.text();
          popupContent.innerHTML = text;
        } catch(e) {
          popupContent.innerHTML = '<p style="color:var(--muted)">Error loading file.</p>';
        }
      });
    });

    closeBtn.addEventListener('click', () => overlay.classList.remove('show'));
    overlay.addEventListener('click', (e) => { if(e.target === overlay) overlay.classList.remove('show'); });
  </script>
</body>
</html>
